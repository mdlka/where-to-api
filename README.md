# WhereTo API

API для совместного планирования прогулок на Ruby on Rails. Решает проблему выбора мест для посещения в группе — участники предлагают локации (свои или из базы реальных мест), обсуждают и оценивают их, создавая персонализированные планы досуга.

## Технологии

* Ruby on Rails 8.0.2
* PostgreSQL + PostGIS
* RGeo + ActiveRecord PostGIS Adapter для работы с геоданными
* Minitest для тестирования

## Основные возможности

* [x] Регистрация и аутентификация пользователей
* [x] CRUD операции для планов прогулок
* [x] Добавление пользовательских локаций в планы
* [x] Поиск существующих локаций в радиусе от заданной точки
* [x] Контроль доступа к планам
* [x] Добавление других пользователей в планы
* [ ] Система оценок лайки/дизлайки для локаций в плане
* [ ] Комментарии для обсуждения локаций в плане

## Особенности реализации

* **Работа с геоданными через PostGIS:** использование типа `geography` вместо обычных `float` координат для точных геопространственных запросов и поиска в радиусе.
* **Интеграция с OpenStreetMap:** база данных наполняется реальными объектами из OpenStreetMap через Overpass API с помощью rake задач.
* **Нативная аутентификация:** реализация без внешних гемов на стандартных решениях Rails.

## Установка и локальный запуск

1.  **Склонируйте репозиторий:**
    ```bash
    git clone https://github.com/mdlka/where-to-api
    cd where-to-api
    ```

2.  **Установите зависимости:**
    ```bash
    bundle install
    ```

3.  **Настройте базу данных:**  
    Убедитесь, что у вас установлен PostgreSQL и активировано расширение PostGIS.  
    Создайте файл `.env` для переменных окружения на основе [`.env.template`](https://github.com/mdlka/where-to-api/blob/master/.env.template).  
    Выполните миграции:
    ```bash
    rails db:create
    rails db:migrate
    ```

4.  **Запустите сервер:**
    ```bash
    rails server
    ```

## Импорт данных
Для импорта мест из города используйте следующую команду:
```bash
rails places:import_osm CITY="Москва"
```
